# ç»ˆç«¯ AI åŠ©æ‰‹

ä¸€ä¸ªåœ¨ç»ˆç«¯ä¸­ä½¿ç”¨çš„ AI åŠ©æ‰‹ï¼Œæ”¯æŒè¯»å–ä¸Šä¸‹æ–‡ã€åˆ†æé”™è¯¯ã€è§£é‡Šä»£ç ç­‰åŠŸèƒ½ã€‚é™„å¸¦ PyQt å›¾å½¢ç•Œé¢ï¼Œç”¨äºå¯è§†åŒ–ç®¡ç† API é…ç½®ã€‚

## åŠŸèƒ½ç‰¹æ€§

### CLI åŠŸèƒ½
- ğŸ¤– **äº¤äº’å¼å¯¹è¯**: è¿ç»­æé—®ï¼Œä¿æŒä¸Šä¸‹æ–‡
- ğŸ“‹ **ä¸Šä¸‹æ–‡æ„ŸçŸ¥**: è‡ªåŠ¨è¯»å–å½“å‰ç›®å½•æ–‡ä»¶ã€shell å†å²
- ğŸ” **é”™è¯¯åˆ†æ**: é€šè¿‡ç®¡é“åˆ†æå‘½ä»¤è¾“å‡ºå’Œé”™è¯¯
- âš¡ **å¿«æ·è°ƒç”¨**: æ”¯æŒ `/ai` å¿«æ·å‘½ä»¤
- ğŸ”Œ **å…¼å®¹ OpenAI API**: æ”¯æŒä»»ä½•å…¼å®¹ OpenAI API çš„æœåŠ¡
- ğŸ›¡ï¸ **å‘½ä»¤ä¿¡ä»»ç®¡ç†**: åŠ¨æ€æ·»åŠ ä¿¡ä»»å‘½ä»¤ï¼Œæ”¯æŒ CLI å’Œ GUI ç®¡ç†

### GUI åŠŸèƒ½
- ğŸ“Š **API æµ‹è¯•**: å¯è§†åŒ–æµ‹è¯• API è¿æ¥å’Œå“åº”
- âš™ï¸ **é…ç½®ç®¡ç†**: æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤å¤šä¸ª API é…ç½®
- ğŸ›¡ï¸ **å‘½ä»¤ç®¡ç†**: ç®¡ç†ä¿¡ä»»çš„å‘½ä»¤ç™½åå•
- ğŸ“œ **å†å²è®°å½•**: æŸ¥çœ‹æ‰€æœ‰ API è°ƒç”¨å†å²
- ğŸ“ˆ **ä½¿ç”¨ç»Ÿè®¡**: ç»Ÿè®¡ API è°ƒç”¨æ¬¡æ•°å’Œ Token æ¶ˆè€—

## å®‰è£…

```bash
# å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®
cd terminal-ai

# è¿è¡Œå®‰è£…è„šæœ¬
chmod +x install.sh
./install.sh
```

## é…ç½®

è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

```bash
# API é…ç½® (å…¼å®¹ OpenAI API çš„æœåŠ¡)
export AI_API_KEY="your-api-key"
export AI_API_ENDPOINT="https://your-api-endpoint"
export AI_MODEL="gpt-4"  # å¯é€‰ï¼Œé»˜è®¤ gpt-4
```

**ç¤ºä¾‹é…ç½® (xiaomimimo API):**
```bash
export AI_API_KEY="sk-xxxxxxxxxxxx"
export AI_API_ENDPOINT="https://api.xiaomimimo.com/v1"
export AI_MODEL="mimo-v2-flash"
```

å°†é…ç½®æ·»åŠ åˆ° `~/.bashrc` æˆ– `~/.zshrc` ä½¿å…¶æ°¸ä¹…ç”Ÿæ•ˆã€‚

## ä½¿ç”¨æ–¹æ³•

### CLI ä½¿ç”¨

#### äº¤äº’å¼æ¨¡å¼

```bash
ai
```

è¿›å…¥å¯¹è¯æ¨¡å¼ï¼Œå¯ä»¥è¿ç»­æé—®ã€‚

#### å•æ¬¡æé—®

```bash
ai "è§£é‡Šè¿™ä¸ªé”™è¯¯"
```

#### ç®¡é“åˆ†æ

```bash
make 2>&1 | ai "åˆ†æè¿™äº›é”™è¯¯"
npm run build 2>&1 | ai "æ„å»ºå¤±è´¥äº†ï¼Œå¸®æˆ‘çœ‹çœ‹"
```

#### æ™ºèƒ½å‘½ä»¤æ‰§è¡Œ

å½“ä½¿ç”¨ `ai` å‘½ä»¤æ—¶ï¼Œå¦‚æœè¾“å…¥çš„æ˜¯ shell å‘½ä»¤ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ‰§è¡Œå¹¶å°†è¾“å‡ºä¼ é€’ç»™ AIï¼š

```bash
ai ls                    # æ‰§è¡Œ ls å‘½ä»¤ï¼ŒAI åŸºäºè¾“å‡ºå›ç­”
ai which claude          # æ‰§è¡Œ which claudeï¼ŒAI åŸºäºè¾“å‡ºå›ç­”
ai cd /                 # æ‰§è¡Œ cd /ï¼ŒAI åŸºäºè¾“å‡ºå›ç­”
ai "ä½ å¥½ä½ æ˜¯è°"          # ä¸æ˜¯å‘½ä»¤ï¼Œç›´æ¥ä½œä¸ºé—®é¢˜å‘é€ç»™ AI
```

å¯¹äºä¸åœ¨å®‰å…¨ç™½åå•ä¸­çš„å‘½ä»¤ï¼Œç³»ç»Ÿä¼šè¯¢é—®æ˜¯å¦ä¿¡ä»»ï¼š
- `y` - ä¸´æ—¶ä¿¡ä»»å¹¶æ‰§è¡Œ
- `a` - æ°¸ä¹…ä¿¡ä»»å¹¶æ‰§è¡Œ
- `n` - ä¸ä¿¡ä»»ï¼Œä½œä¸ºé—®é¢˜å‘é€ç»™ AI

#### åŒ…å« shell å†å²

```bash
ai --history "æˆ‘åˆšæ‰åšäº†ä»€ä¹ˆï¼Ÿ"
```

**é‡è¦è¯´æ˜**ï¼šAI è¯»å– shell å†å²çš„åŠŸèƒ½ä¾èµ–äºæ‚¨çš„ shell å†å²é…ç½®ã€‚å¦‚æœ AI æ— æ³•è¯»å–åˆšåˆšæ‰§è¡Œçš„å‘½ä»¤ï¼Œè¯·è¿è¡Œè¯Šæ–­è„šæœ¬ï¼š

```bash
/home/idealer/.claude/agentstream/agents/Projectsource/terminal-ai/diagnose_history.sh
```

è¯Šæ–­è„šæœ¬ä¼šæ£€æŸ¥ï¼š
- Shell ç±»å‹ï¼ˆäº¤äº’å¼/éäº¤äº’å¼ï¼‰
- å†å²åŠŸèƒ½çŠ¶æ€
- å†å²ç¯å¢ƒå˜é‡é…ç½®

**å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ**ï¼š

1. **AI æ— æ³•è¯»å–åˆšåˆšæ‰§è¡Œçš„å‘½ä»¤**
   - **åŸå› **ï¼š`~/.bashrc` ä¸­çš„ Terminal AI é…ç½®å¿…é¡»åœ¨éäº¤äº’å¼ shell æ£€æŸ¥ä¹‹å‰
   - **è§£å†³**ï¼šè¿è¡Œå®‰è£…è„šæœ¬ï¼Œå®ƒä¼šè‡ªåŠ¨å°†é…ç½®æ·»åŠ åˆ°æ­£ç¡®ä½ç½®
   - **æ‰‹åŠ¨ä¿®å¤**ï¼šç¡®ä¿ `~/.bashrc` å‰å‡ è¡ŒåŒ…å«ï¼š
     ```bash
     # Terminal AI é…ç½® - å¿…é¡»åœ¨éäº¤äº’å¼æ£€æŸ¥ä¹‹å‰
     PROMPT_COMMAND="history -a; $PROMPT_COMMAND"
     ai() { ... }
     _ai() { ... }
     case $- in *i*) ;; *) return;; esac  # è¿™è¡Œåœ¨é…ç½®ä¹‹å
     ```

2. **å¿…é¡»ä½¿ç”¨ `ai` å‘½ä»¤**
   - å¿…é¡»ä½¿ç”¨ `ai` å‘½ä»¤è€Œä¸æ˜¯ `python3 ai_cli.py`ï¼Œå› ä¸º `ai` å‘½ä»¤ä¼šå…ˆä¿å­˜å†å²
   - è¿™æ˜¯ Bash çš„è®¾è®¡é™åˆ¶ï¼Œæ— æ³•é€šè¿‡ä»£ç å®Œå…¨è§£å†³

#### å¿«æ·å‘½ä»¤

å®‰è£…åä¼šè‡ªåŠ¨è®¾ç½® `/ai` aliasï¼š

```bash
/ai "å¸®æˆ‘çœ‹çœ‹è¿™ä¸ªé—®é¢˜"
```

### GUI ä½¿ç”¨

å¯åŠ¨å›¾å½¢ç•Œé¢ï¼š

```bash
ai --gui
```

æˆ–

```bash
python3 gui/main.py
```

#### åŠŸèƒ½æ¨¡å—

1. **API æµ‹è¯•**: é€‰æ‹©é…ç½®ï¼Œè¾“å…¥æ¶ˆæ¯ï¼ŒæŸ¥çœ‹ AI å“åº”
2. **é…ç½®ç®¡ç†**: æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ API é…ç½®ï¼Œè®¾ç½®é»˜è®¤é…ç½®
3. **å‘½ä»¤ç®¡ç†**: ç®¡ç†ä¿¡ä»»çš„å‘½ä»¤ç™½åå•ï¼Œæ·»åŠ /ç§»é™¤/æ¸…ç©ºå‘½ä»¤
4. **å†å²è®°å½•**: æŸ¥çœ‹æ‰€æœ‰ API è°ƒç”¨å†å²ï¼Œæ”¯æŒæœç´¢å’Œç­›é€‰
5. **ä½¿ç”¨ç»Ÿè®¡**: æŸ¥çœ‹ API è°ƒç”¨æ¬¡æ•°å’Œ Token æ¶ˆè€—ç»Ÿè®¡

## é¡¹ç›®ç»“æ„

```
terminal-ai/
â”œâ”€â”€ ai_cli.py              # ä¸» CLI å…¥å£
â”œâ”€â”€ context.py             # ä¸Šä¸‹æ–‡æ”¶é›†æ¨¡å—
â”œâ”€â”€ ai_client.py           # AI API å®¢æˆ·ç«¯
â”œâ”€â”€ config.py              # é…ç½®ç®¡ç†
â”œâ”€â”€ command_config.py      # å‘½ä»¤é…ç½®ç®¡ç†
â”œâ”€â”€ requirements.txt       # ä¾èµ–
â”œâ”€â”€ install.sh             # å®‰è£…è„šæœ¬
â”œâ”€â”€ README.md              # ä½¿ç”¨è¯´æ˜
â”œâ”€â”€ ai, _ai                # å¯æ‰§è¡Œè„šæœ¬
â”œâ”€â”€ run.py                 # GUI å¯åŠ¨è„šæœ¬
â””â”€â”€ gui/                   # å›¾å½¢ç•Œé¢
    â”œâ”€â”€ main.py            # ä¸»çª—å£
    â”œâ”€â”€ config_manager.py  # é…ç½®ç®¡ç†
    â”œâ”€â”€ api_tester.py      # API æµ‹è¯•
    â”œâ”€â”€ command_manager.py # å‘½ä»¤ç®¡ç†
    â”œâ”€â”€ history.py         # å†å²è®°å½•
    â”œâ”€â”€ stats.py           # ä½¿ç”¨ç»Ÿè®¡
    â””â”€â”€ data/              # æ•°æ®å­˜å‚¨
        â”œâ”€â”€ configs.json   # é…ç½®æ•°æ®
        â”œâ”€â”€ history.json   # å†å²è®°å½•
        â””â”€â”€ stats.json     # ç»Ÿè®¡æ•°æ®
```

## ä¾èµ–

- Python 3.7+
- openai >= 1.0.0
- PyQt5 >= 5.15.0 (GUI éœ€è¦)

## ç¤ºä¾‹

```bash
# åˆ†æé”™è¯¯
python script.py 2>&1 | ai "è¿™ä¸ªé”™è¯¯æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ"

# è§£é‡Šå‘½ä»¤
ai "è§£é‡Šä¸€ä¸‹ grep -r 'TODO' . çš„ä½œç”¨"

# ä»£ç å®¡æŸ¥
git diff | ai "å¸®æˆ‘å®¡æŸ¥è¿™äº›æ”¹åŠ¨"

# è°ƒè¯•
curl -X POST http://api.example.com 2>&1 | ai "è¯·æ±‚å¤±è´¥äº†ï¼Œåˆ†æåŸå› "

# æ‰§è¡Œå‘½ä»¤å¹¶è®© AI åˆ†æ
ai ls -la
ai git status
```

## License

MIT
